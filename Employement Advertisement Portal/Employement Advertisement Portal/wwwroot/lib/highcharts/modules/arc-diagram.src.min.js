!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/arc-diagram",["highcharts","highcharts/modules/sankey"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){"use strict";e=e?e._modules:{};function t(e,t,s,o){e.hasOwnProperty(t)||(e[t]=o.apply(null,s),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/ArcDiagram/ArcDiagramPoint.js",[e["Series/NodesComposition.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,s){var{prototype:{pointClass:t}}=t["seriesTypes"]["sankey"];const o=s["extend"];class i extends t{isValid(){return!0}}return o(i.prototype,{setState:e.setNodeState}),i}),t(e,"Series/ArcDiagram/ArcDiagramSeries.js",[e["Series/ArcDiagram/ArcDiagramPoint.js"],e["Series/Sankey/SankeyColumnComposition.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Renderer/SVG/SVGRenderer.js"],e["Core/Utilities.js"]],function(e,t,o,s,i,a){const{symbols:m}=i["prototype"],{column:n,sankey:u}=s["seriesTypes"],{extend:r,merge:c,pick:g,relativeLength:p}=a;class l extends u{createNodeColumns(){const d=this,m=d.chart,u=t.compose([],d);return u.sankeyColumn.maxLength=m.inverted?m.plotHeight:m.plotWidth,u.sankeyColumn.getTranslationFactor=e=>{const t=u.slice(),s=this.options.minLinkWidth||0;let o,i=0,a,n,r=0,l=1,h=0,d=(m.plotSizeX||0)-(e.options.marker&&e.options.marker.lineWidth||0)-(u.length-1)*e.nodePadding;for(;u.length;){for(i=d/u.sankeyColumn.sum(),o=!1,a=u.length;a--;){n=u[a].getSum()*i*l;var p=Math.min(m.plotHeight,m.plotWidth);n>p?l=Math.min(p/n,l):n<s&&(u.splice(a,1),d-=s,n=s,o=!0),h+=n*(1-l)/2,r=Math.max(r,n)}if(!o)break}return u.length=0,t.forEach(e=>{e.scale=l,u.push(e)}),u.sankeyColumn.maxRadius=r,u.sankeyColumn.scale=l,u.sankeyColumn.additionalSpace=h,i},u.sankeyColumn.offset=function(t,s){var o=t.series.options.equalNodes,i=d.nodePadding,a=Math.min(m.plotWidth,m.plotHeight,(u.sankeyColumn.maxLength||0)/d.nodes.length-i);let n=u.sankeyColumn.additionalSpace||0,r;for(let e=0;e<u.length;e++){var l=u[e].getSum()*(u.sankeyColumn.scale||0),h=o?a:Math.max(l*s,d.options.minLinkWidth||0);if(r=l?h+i:0,u[e]===t)return{relativeLeft:n+p(t.options.offset||0,r)};n+=r}},d.nodes.forEach(function(e){e.column=0,u.push(e)}),[u]}translateLink(s){const e=s.fromNode,t=s.toNode,o=this.chart,i=this.translationFactor,a=s.options,n=this.options,r=g(a.linkWeight,n.linkWeight,Math.max((s.weight||0)*i*e.scale,this.options.minLinkWidth||0)),l=s.series.options.centeredLinks,h=e.nodeY;var d=(e,t)=>{t=(e.offset(s,t)||0)*i;return Math.min(e.nodeX+t,e.nodeX+(e.shapeArgs&&e.shapeArgs.height||0)-r)};let p=l?e.nodeX+((e.shapeArgs.height||0)-r)/2:d(e,"linksFrom"),m=l?t.nodeX+((t.shapeArgs.height||0)-r)/2:d(t,"linksTo"),u=h;p>m&&([p,m]=[m,p]),n.reversed&&([p,m]=[m,p],u=(o.plotSizeY||0)-u),s.shapeType="path",s.linkBase=[p,p+r,m,m+r];d=(m+r-p)/Math.abs(m+r-p)*g(n.linkRadius,Math.min(Math.abs(m+r-p)/2,e.nodeY-Math.abs(r)));s.shapeArgs={d:[["M",p,u],["A",(m+r-p)/2,d,0,0,1,m+r,u],["L",m,u],["A",(m-p-r)/2,d-r,0,0,0,p+r,u],["Z"]]},s.dlBox={x:p+(m-p)/2,y:u-d,height:r,width:0},s.tooltipPos=o.inverted?[(o.plotSizeY||0)-s.dlBox.y-r/2,(o.plotSizeX||0)-s.dlBox.x]:[s.dlBox.x,s.dlBox.y+r/2],s.y=s.plotY=1,s.x=s.plotX=1,s.color||(s.color=e.color)}translateNode(t,s){var o=this.translationFactor,i=this.chart,a=i.inverted?i.plotWidth:i.plotHeight,n=this.options,a=Math.min(i.plotWidth,i.plotHeight,a/t.series.nodes.length-this.nodePadding),r=t.getSum()*(s.sankeyColumn.scale||0),a=n.equalNodes?a:Math.max(r*o,this.options.minLinkWidth||0),l=Math.round(n.marker&&n.marker.lineWidth||0)%2/2,h=s.sankeyColumn.offset(t,o),o=Math.floor(g(h&&h.absoluteLeft,(s.sankeyColumn.left(o)||0)+(h&&h.relativeLeft||0)))+l,h=c(n.marker,t.options.marker),d=h.symbol,p=h.radius,h=parseInt(n.offset,10)*((i.inverted?i.plotWidth:i.plotHeight)-(Math.floor(this.colDistance*(t.column||0)+(h.lineWidth||0)/2)+l+(s.sankeyColumn.scale||0)*(s.sankeyColumn.maxRadius||0)/2))/100;if(t.sum=r){t.nodeX=o,t.nodeY=h;l=o,s=t.options.width||n.width||a,r=t.options.height||n.height||a;let e=h;n.reversed&&(e=(i.plotSizeY||0)-h,i.inverted&&(e=(i.plotSizeY||0)-h)),this.mapOptionsToLevel&&(t.dlOptions=u.getDLOptions({level:this.mapOptionsToLevel[t.level],optionsPoint:t.options})),t.plotX=1,t.plotY=1,t.tooltipPos=i.inverted?[(i.plotSizeY||0)-e-r/2,(i.plotSizeX||0)-l-s/2]:[l+s/2,e+r/2],t.shapeType="path",t.shapeArgs={d:m[d||"circle"](l,e-(p||r)/2,p||s,p||r),width:p||s,height:p||r},t.dlBox={x:l+s/2,y:e,height:0,width:0}}else t.dlOptions={enabled:!1}}drawDataLabels(){var e;this.options.dataLabels&&(e=this.options.dataLabels.textPath,n.prototype.drawDataLabels.call(this,this.nodes),this.options.dataLabels.textPath=this.options.dataLabels.linkTextPath,n.prototype.drawDataLabels.call(this,this.data),this.options.dataLabels.textPath=e)}pointAttribs(e,t){if(e&&e.isNode){const{...s}=o.prototype.pointAttribs.apply(this,arguments);return s}return super.pointAttribs.apply(this,arguments)}markerAttribs(e){return e.isNode?super.markerAttribs.apply(this,arguments):{}}}return l.defaultOptions=c(u.defaultOptions,{centeredLinks:!1,offset:"100%",equalNodes:!1,reversed:!1,dataLabels:{linkTextPath:{attributes:{startOffset:"25%"}}},marker:{symbol:"circle",fillOpacity:1,lineWidth:0,states:{}}}),r(l.prototype,{orderNodes:!1}),l.prototype.pointClass=e,s.registerSeriesType("arcdiagram",l),l}),t(e,"masters/modules/arc-diagram.src.js",[e["Core/Globals.js"]],function(e){return e})});