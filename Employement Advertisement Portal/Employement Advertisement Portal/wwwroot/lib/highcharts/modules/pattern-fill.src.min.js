!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/pattern-fill",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,r){t.hasOwnProperty(e)||(t[e]=r.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Extensions/PatternFill.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Utilities.js"]],function(t,e,f){const u=t["animObject"],o=e["getOptions"],{addEvent:s,defined:n,erase:a,extend:h,merge:c,pick:g,removeEvent:m,wrap:p}=f,l=function(){const t=[],e=o().colors;let i=0;for(const r of["M 0 0 L 5 5 M 4.5 -0.5 L 5.5 0.5 M -0.5 4.5 L 0.5 5.5","M 0 5 L 5 0 M -0.5 0.5 L 0.5 -0.5 M 4.5 5.5 L 5.5 4.5","M 2 0 L 2 5 M 4 0 L 4 5","M 0 2 L 5 2 M 0 4 L 5 4","M 0 1.5 L 2.5 1.5 L 2.5 0 M 2.5 5 L 2.5 3.5 L 5 3.5"])t.push({path:r,color:e[i++],width:5,height:5,patternTransform:"scale(1.4 1.4)"});i=5;for(const n of["M 0 0 L 5 10 L 10 0","M 3 3 L 8 3 L 8 8 L 3 8 Z","M 5 5 m -4 0 a 4 4 0 1 1 8 0 a 4 4 0 1 1 -8 0","M 0 0 L 10 10 M 9 -1 L 11 1 M -1 9 L 1 11","M 0 10 L 10 0 M -1 1 L 1 -1 M 9 11 L 11 9"])t.push({path:n,color:e[i],width:10,height:10}),i+=5;return t}();function d(t,e){const i=JSON.stringify(t),r=i.length||0;let n=0,o=0,s,a;if(e){a=Math.max(Math.floor(r/500),1);for(let t=0;t<r;t+=a)n+=i.charCodeAt(t);n&=n}for(;o<r;++o)s=i.charCodeAt(o),n=(n<<5)-n+s,n&=n;return n.toString(16).replace("-","1")}function y(){if(this.renderer&&(this.renderer.defIds||[]).filter(t=>t&&t.indexOf&&0===t.indexOf("highcharts-pattern-")).length){for(const t of this.series)if(t.visible)for(const e of t.points){const i=e.options&&e.options.color;i&&i.pattern&&(i.pattern._width="defer",i.pattern._height="defer")}this.redraw(!1)}}function x(){const i={},r=this.renderer,t=(r.defIds||[]).filter(t=>t.indexOf&&0===t.indexOf("highcharts-pattern-"));if(t.length){[].forEach.call(this.renderTo.querySelectorAll('[color^="url("], [fill^="url("], [stroke^="url("]'),t=>{const e=t.getAttribute("fill")||t.getAttribute("color")||t.getAttribute("stroke");e&&(t=e.replace(r.url,"").replace("url(#","").replace(")",""),i[t]=!0)});for(const e of t)i[e]||(a(r.defIds,e),r.patternElements[e]&&(r.patternElements[e].destroy(),delete r.patternElements[e]))}}function w(){const t=this.options.color;t&&t.pattern&&("string"==typeof t.pattern.path&&(t.pattern.path={d:t.pattern.path}),this.color=this.options.color=c(this.series.options.color,t))}function M(t){const e=t.args[0],i=t.args[1],r=t.args[2],n=this.chartIndex||0;let o=e.pattern,s="#333333";if(!(o=void 0!==e.patternIndex&&l?l[e.patternIndex]:o))return!0;if(o.image||"string"==typeof o.path||o.path&&o.path.d){let t=r.parentNode&&r.parentNode.getAttribute("class");t=t&&-1<t.indexOf("highcharts-legend"),"defer"!==o._width&&"defer"!==o._height||b.call({graphic:{element:r}},o),!t&&o.id||((o=c({},o)).id="highcharts-pattern-"+n+"-"+d(o)+d(o,!0)),this.addPattern(o,!this.forExport&&g(o.animation,this.globalAnimation,{duration:100})),s=`url(${this.url}#${o.id+(this.forExport?"-export":"")})`}else s=o.color||s;return r.setAttribute(i,s),!(e.toString=function(){return s})}function L(){var t=this.chart.isResizing;if(this.isDirtyData||t||!this.chart.hasRendered)for(const e of this.points){const i=e.options&&e.options.color;i&&i.pattern&&(!t||e.shapeArgs&&e.shapeArgs.width&&e.shapeArgs.height?e.calculatePatternDimensions(i.pattern):(i.pattern._width="defer",i.pattern._height="defer"))}}function b(t){if(!t.width||!t.height){const i=this.graphic&&(this.graphic.getBBox&&this.graphic.getBBox(!0)||this.graphic.element&&this.graphic.element.getBBox())||{},r=this.shapeArgs;if(r&&(i.width=r.width||i.width,i.height=r.height||i.height,i.x=r.x||i.x,i.y=r.y||i.y),t.image){var e;if(!i.width||!i.height)return t._width="defer",t._height="defer",e=this.series.chart.mapView&&this.series.chart.mapView.getSVGTransform().scaleY,void(n(e)&&e<0&&(t._inverted=!0));t.aspectRatio&&(i.aspectRatio=i.width/i.height,t.aspectRatio>i.aspectRatio?i.aspectWidth=i.height*t.aspectRatio:i.aspectHeight=i.width/t.aspectRatio),t._width=t.width||Math.ceil(i.aspectWidth||i.width),t._height=t.height||Math.ceil(i.aspectHeight||i.height)}t.width||(t._x=t.x||0,t._x+=i.x-Math.round(i.aspectWidth?Math.abs(i.aspectWidth-i.width)/2:0)),t.height||(t._y=t.y||0,t._y+=i.y-Math.round(i.aspectHeight?Math.abs(i.aspectHeight-i.height)/2:0))}}function _(e,t){const i=g(t,!0),r=u(i),n=e.color||"#333333",o=e.height||("number"==typeof e._height?e._height:0)||32,s=t=>this.rect(0,0,a,o).attr({fill:t}).add(d),a=e.width||("number"==typeof e._width?e._width:0)||32;let h,c=e.id,p;if(c||(this.idCounter=this.idCounter||0,c="highcharts-pattern-"+this.idCounter+"-"+(this.chartIndex||0),++this.idCounter),this.forExport&&(c+="-export"),this.defIds=this.defIds||[],-1<this.defIds.indexOf(c))return;this.defIds.push(c);const l={id:c,patternUnits:"userSpaceOnUse",patternContentUnits:e.patternContentUnits||"userSpaceOnUse",width:a,height:o,x:e._x||e.x||0,y:e._y||e.y||0},d=(e._inverted&&(l.patternTransform="scale(1, -1)",e.patternTransform&&(e.patternTransform+=" scale(1, -1)")),e.patternTransform&&(l.patternTransform=e.patternTransform),this.createElement("pattern").attr(l).add(this.defs));return d.id=c,e.path?(p=f.isObject(e.path)?e.path:{d:e.path},e.backgroundColor&&s(e.backgroundColor),h={d:p.d},this.styledMode||(h.stroke=p.stroke||n,h["stroke-width"]=g(p.strokeWidth,2),h.fill=p.fill||"none"),p.transform&&(h.transform=p.transform),this.createElement("path").attr(h).add(d),d.color=n):e.image&&(i?this.image(e.image,0,0,a,o,function(){this.animate({opacity:g(e.opacity,1)},r),m(this.element,"load")}).attr({opacity:0}):this.image(e.image,0,0,a,o)).add(d),e.image&&i||void 0===e.opacity||[].forEach.call(d.element.childNodes,t=>{t.setAttribute("opacity",e.opacity)}),this.patternElements=this.patternElements||{},this.patternElements[c]=d}function A(t){const e=this.options.color;e&&e.pattern&&!e.pattern.color?(delete this.options.color,t.apply(this,[].slice.call(arguments,1)),e.pattern.color=this.color,this.color=this.options.color=e):t.apply(this,[].slice.call(arguments,1))}function E(){if(this.chart?.mapView){const t=this.chart,i=t.renderer,r=i.patternElements;i.defIds?.length&&r&&this.points.filter(function(t){const e=t;return!!e.graphic&&((e.graphic.element.hasAttribute("fill")||e.graphic.element.hasAttribute("color")||e.graphic.element.hasAttribute("stroke"))&&!e.options.color?.pattern?.image&&!!e.group?.scaleX&&!!e.group?.scaleY)}).map(function(t){const e=t;return{id:(e.graphic?.element.getAttribute("fill")||e.graphic?.element.getAttribute("color")||e.graphic?.element.getAttribute("stroke")||"").replace(i.url,"").replace("url(#","").replace(")",""),x:e.group?.scaleX||1,y:e.group?.scaleY||1}}).filter(function(i,r,t){return""!==i.id&&-1!==i.id.indexOf("highcharts-pattern-")&&!t.some(function(t,e){return t.id===i.id&&e<r})}).forEach(function(t){var e=t.id;r[e].scaleX=1/t.x,r[e].scaleY=1/t.y,r[e].updateTransform("patternTransform")})}}return{compose:function(t,e,i){var r=e.prototype.pointClass,n=r.prototype;n.calculatePatternDimensions||(s(t,"endResize",y),s(t,"redraw",x),h(n,{calculatePatternDimensions:b}),s(r,"afterInit",w),s(e,"render",L),p(e.prototype,"getColor",A),s(e,"afterRender",E),s(e,"mapZoomComplete",E),h(i.prototype,{addPattern:_}),s(i,"complexColor",M))},patterns:l}}),e(t,"masters/modules/pattern-fill.src.js",[t["Core/Globals.js"],t["Extensions/PatternFill.js"]],function(t,e){const i=t;return i.patterns=e.patterns,e.compose(i.Chart,i.Series,i.SVGRenderer),t})});