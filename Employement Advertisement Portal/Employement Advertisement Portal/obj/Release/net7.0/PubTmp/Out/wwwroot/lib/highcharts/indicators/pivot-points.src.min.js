!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/indicators/pivot-points",["highcharts","highcharts/modules/stock"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,a,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,a),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Stock/Indicators/PivotPoints/PivotPointsPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(s){function t(t,e){var a=t.series.pointArrayMap;let o,n=a.length;for(s.seriesTypes.sma.prototype.pointClass.prototype[e].call(t);n--;)t[o="dataLabel"+a[n]]&&t[o].element&&t[o].destroy(),t[o]=null}class e extends s.seriesTypes.sma.prototype.pointClass{destroyElements(){t(this,"destroyElements")}destroy(){t(this,"destroyElements")}}return e}),e(t,"Stock/Indicators/PivotPoints/PivotPointsIndicator.js",[t["Stock/Indicators/PivotPoints/PivotPointsPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,a){var o=e.seriesTypes["sma"];const{merge:n,extend:s,defined:d,isArray:g}=a;class i extends o{toYData(t){return[t.P]}translate(){const a=this;super.translate.apply(a),a.points.forEach(function(e){a.pointArrayMap.forEach(function(t){d(e[t])&&(e["plot"+t]=a.yAxis.toPixels(e[t],!0))})}),a.plotEndPoint=a.xAxis.toPixels(a.endPoint,!0)}getGraphPath(t){const e=this,a=[[],[],[],[],[],[],[],[],[]],o=e.pointArrayMap.length;let n=e.plotEndPoint,s=[],i,l,r=t.length,p;for(;r--;){for(l=t[r],p=0;p<o;p++)i=e.pointArrayMap[p],d(l[i])&&a[p].push({plotX:l.plotX,plotY:l["plot"+i],isNull:!1},{plotX:n,plotY:l["plot"+i],isNull:!1},{plotX:n,plotY:null,isNull:!0});n=l.plotX}return a.forEach(t=>{s=s.concat(super.getGraphPath.call(e,t))}),s}drawDataLabels(){const a=this,o=a.pointArrayMap;let n,s,i,l;a.options.dataLabels.enabled&&(s=a.points.length,o.concat([!1]).forEach((t,e)=>{for(l=s;l--;)i=a.points[l],t?(i.y=i[t],i.pivotLine=t,i.plotY=i["plot"+t],n=i["dataLabel"+t],e&&(i["dataLabel"+o[e-1]]=i.dataLabel),i.dataLabels||(i.dataLabels=[]),i.dataLabels[0]=i.dataLabel=n=n&&n.element?n:null):i["dataLabel"+o[e-1]]=i.dataLabel;super.drawDataLabels.call(a)}))}getValues(t,e){const a=e.period,o=t.xData,n=t.yData,s=n?n.length:0,i=this[e.algorithm+"Placement"],l=[],r=[],p=[];let d,c,u,h,f,y,P,m;if(!(o.length<a)&&g(n[0])&&4===n[0].length){for(m=a+1;m<=s+a;m+=a)u=o.slice(m-a-1,m),h=n.slice(m-a-1,m),c=u.length,d=u[c-1],y=this.getPivotAndHLC(h),P=i(y),f=l.push([d].concat(P)),r.push(d),p.push(l[f-1].slice(1));return this.endPoint=u[0]+(d-u[0])/c*a,{values:l,xData:r,yData:p}}}getPivotAndHLC(t){var e=t[t.length-1][3];let a=-1/0,o=1/0;return t.forEach(function(t){a=Math.max(a,t[1]),o=Math.min(o,t[2])}),[(a+o+e)/3,a,o,e]}standardPlacement(t){var e=t[1]-t[2];return[null,null,t[0]+e,2*t[0]-t[2],t[0],2*t[0]-t[1],t[0]-e,null,null]}camarillaPlacement(t){var e=t[1]-t[2];return[t[3]+1.5*e,t[3]+1.25*e,t[3]+1.1666*e,t[3]+1.0833*e,t[0],t[3]-1.0833*e,t[3]-1.1666*e,t[3]-1.25*e,t[3]-1.5*e]}fibonacciPlacement(t){var e=t[1]-t[2];return[null,t[0]+e,t[0]+.618*e,t[0]+.382*e,t[0],t[0]-.382*e,t[0]-.618*e,t[0]-e,null]}}return i.defaultOptions=n(o.defaultOptions,{params:{index:void 0,period:28,algorithm:"standard"},marker:{enabled:!1},enableMouseTracking:!1,dataLabels:{enabled:!0,format:"{point.pivotLine}"},dataGrouping:{approximation:"averages"}}),s(i.prototype,{nameBase:"Pivot Points",pointArrayMap:["R4","R3","R2","R1","P","S1","S2","S3","S4"],pointValKey:"P",pointClass:t}),e.registerSeriesType("pivotpoints",i),i}),e(t,"masters/indicators/pivot-points.src.js",[t["Core/Globals.js"]],function(t){return t})});